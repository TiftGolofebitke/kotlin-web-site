<!DOCTYPE html>
    <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/assets/images/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/assets/images/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/assets/images/apple-touch-icon-144x144.png" />
<link rel="stylesheet" href="/css/styles.css">
<!--
<link rel="stylesheet" href="/css/syntax.css">
<link rel="stylesheet" href="/css/keywords.css">
-->
<title>Java Interop</title>

</head>
<body>

<div class="global-layout">
    <header class="global-header">
    <div class="g-layout">
        <a class="global-header-logo" href="">Project Kotlin</a>

        <form class="global-header-search">
            <div class="search-input-wrap">
                <input type="text" class="search-input">
            </div>
            <input type="submit" class="search-submit-button">
        </form>

        <nav class="global-header-nav">
            
                
                    <a href="/"
                       class="nav-item">
                        Home
                    </a>
                
            
                
                    <a href="/try/"
                       class="nav-item">
                        Try
                    </a>
                
            
                
                    <a href="/download/"
                       class="nav-item">
                        Download
                    </a>
                
            
                
                    <span class="nav-item is_active">
                        Learn
                    </span>
                
            
                
                    <a href="/contribute/"
                       class="nav-item">
                        Contribute
                    </a>
                
            
        </nav>

    </div>
</header>
    
    

    <div class="global-current-section">
        <div class="g-layout">
            <div class="current-section-title">Learn Kotlin</div>

            
                <ul class="current-section-nav">
                    
                        
                            <li class="nav-item">
                                <a href="/learn/" class="nav-item-text">Getting Started</a>
                            </li>

                        
                    
                        
                            <li class="nav-item is_active">
                                <a href="/docs/" class="nav-item-text">Documentation</a>
                            </li>

                        
                    
                        
                            <li class="nav-item">
                                <a href="/learn/faq/" class="nav-item-text">FAQ</a>
                            </li>

                        
                    
                        
                            <li class="nav-item">
                                <a href="/tutorials/" class="nav-item-text">Tutorials</a>
                            </li>

                        
                    
                        
                            <li class="nav-item">
                                <a href="/learn/videos/" class="nav-item-text">Videos</a>
                            </li>

                        
                    
                        
                            <li class="nav-item">
                                <a href="/learn/events/" class="nav-item-text">Events</a>
                            </li>

                        
                    
                        
                            <li class="nav-item">
                                <a href="/learn/external/" class="nav-item-text">External Resources</a>
                            </li>

                        
                    
                </ul>
            

        </div>
    </div>



    <div class="global-content">
        <h1 class="page-title">Java Interop</h1>

        <p>Kotlin is designed with Java Interoperability in mind. Existing Java code can be called from Kotlin in a natural way, and Kotlin code can be used from
Java rather smoothly as well. In this section we describe some details about calling Java code from Kotlin.</p>

<h2 id="calling-java-code-from-kotlin">Calling Java code from Kotlin</h2>

<p>Pretty much all Java code can be used without any issues</p>

<div class="highlight"><pre><code class="kotlin"><span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.*</span>

<span class="k">fun</span> <span class="nf">demo</span><span class="p">(</span><span class="n">source</span> <span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="k">val</span> <span class="n">list</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;()</span>
  <span class="c1">// &#39;for&#39;-loops work for Java collections:</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">item</span> <span class="k">in</span> <span class="n">source</span><span class="p">)</span>
    <span class="n">list</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
  <span class="c1">// Operator conventions work as well:</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="m">0.</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span>
    <span class="n">list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">source</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1">// get and set are called</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="methods-returning-void">Methods returning void</h3>

<p>If a Java method returns void, it will return Unit when called from Kotlin. If, by any chance, someone uses that return value, it will be assigned at the call site by the Kotlin compiler, since the value itself is known in advance (being Unit.VALUE).</p>

<h3 id="escaping-for-java-identifiers-that-are-keywords-in-kotlin">Escaping for Java identifiers that are keywords in Kotlin</h3>

<p>Some of the Kotlin keywords are valid identifiers in Java: in, object, is, etc. If a Java library uses a Kotlin keyword for a method, you can still call the method
escaping it with the backtick (`) character</p>

<div class="highlight"><pre><code class="kotlin"><span class="n">foo</span><span class="p">.</span><span class="err">`</span><span class="k">is</span><span class="err">`</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
</code></pre></div>

<h3 id="null-safety">Null-Safety</h3>

<p>Any reference in Java may be null. As such, all the Java methods called from Kotlin return nullable references (except for those annotated with @NotNull).
This allows Kotlin to keep the guarantee of having no NullPointerExceptions unless they are explicitly thrown by Kotlin code or caused by something
inside Java code called from Kotlin.</p>

<p>Consider the following examples:</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">val</span> <span class="n">list</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;()</span> <span class="c1">// non-null (constructor result)</span>
<span class="k">val</span> <span class="n">size</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="c1">// non-null (primitive int)</span>
<span class="k">val</span> <span class="n">iterator</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">iterator</span><span class="p">()</span> <span class="c1">// nullable (ordinary method)</span>
</code></pre></div>

<h3 id="checked-exceptions">Checked Exceptions</h3>

<p>In Kotlin, all exceptions are unchecked, meaning that the compiler does not force you to catch any of them. So, when you call a Java method that declares a checked exception, Kotlin does not force you to do anything:</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">fun</span> <span class="nf">render</span><span class="p">(</span><span class="n">list</span> <span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="k">out</span> <span class="n">Any</span><span class="p">?&gt;,</span> <span class="n">to</span> <span class="p">:</span> <span class="n">Appendable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">item</span> <span class="k">in</span> <span class="n">list</span><span class="p">)</span>
    <span class="n">to</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">toString</span><span class="p">())</span> <span class="c1">// Java would require us to catch IOException here</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="java-generics-in-kotlin">Java generics in Kotlin</h3>

<p>Kotlin’s generics are a little different from Java’s (see Generics). When importing Java types to Kotlin we perform some conversions:</p>

<p>*Java’s wildcards are converted into type projections
    Foo&lt;? extends Bar&gt; becomes Foo<out bar="">
    Foo&lt;? super Bar&gt; becomes Foo<in bar=""></in></out></p>

<p><em>Java’s raw types are converted into star projections
    List becomes List&lt;</em>&gt;, i.e. List&lt;out Any?&gt;</p>

<p>Like Java’s, Kotlin’s generics are not retained at runtime, i.e. objects do not carry information about actual type arguments passed to their constructors, i.e. ArrayList<integer>() is indistinguishable from ArrayList<character>(). This makes it impossible to perform is-checks that take generics into account. Kotlin only allows is-checks for star-projected generic types:</character></integer></p>

<div class="highlight"><pre><code class="kotlin"><span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="k">is</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;)</span> <span class="c1">// Error: cannot check if it is really a List of Ints</span>
<span class="c1">// but</span>
<span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="k">is</span> <span class="n">List</span><span class="p">&lt;*&gt;)</span> <span class="c1">// OK: no guarantees about the contents of the list</span>
</code></pre></div>

<h3 id="invariant-arrays">Invariant Arrays</h3>

<p>Arrays in Kotlin are invariant, unlike Java. This means that Kotlin does not let us assign an Array<string> to an Array<any>, which prevents a possible runtime failure. Neither does it allow us to pass an array of a subclass as an array of superclass to a Java method. In most cases, this should not be a major obstacle, but if one really needs to pass an array in a covariant way, they may cast explicitly.</any></string></p>

<p>On the Java platform, having a generic class Array to represent arrays leads to a lot of boxing/unboxing operations. As arrays are mostly use where performance is critical, we introduced a workaround for this issue and defined classes IntArray, DoubleArray, CharArray and so on, which are not related to the Array class and are compiled down to Java’s primitive arrays.</p>

<h3 id="object-methods">Object Methods</h3>

<p>When Java types are imported into Kotlin, all the references of the type <em>java.lang.Object</em> are turned into <em class="keyword">Any?</em>. The big difference between
the two is that <em class="keyword">Any</em> does not declare any members at all. This is due to the <a href="/docs/classes.html#inheritance">inheritance</a> rules in Kotlin.</p>

<p>The problem this causes is that methods such as <em>toString</em> for instance are no longer available on the type. Kotlin solves this problem using <a href="/docs/extension-functions.html">extension functions</a></p>

<h4 id="tostring">toString()</h4>

<p>Declared as an extension function that looks for an instance function named <em>toString</em> and calls it. If there is no <em>toString</em> it returns the default</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">this</span><span class="p">.</span><span class="n">javaClass</span><span class="p">.</span><span class="n">getName</span><span class="p">(</span> <span class="p">+</span> <span class="s">&quot;@&quot;</span> <span class="p">+</span> <span class="n">System</span><span class="p">.</span><span class="n">identityHashCode</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</code></pre></div>

<p>From a developer perspective nothing changes and all <em>toString</em> calls should work. When needing a custom implementation, merely define it in the class</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">class</span> <span class="nf">A</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">fun</span> <span class="nf">toString</span><span class="p">()</span> <span class="p">=</span> <span class="s">&quot;Custom A&quot;</span>
</code></pre></div>

<h4 id="equals">equals()</h4>

<p>In Kotlin, == stands for a <a href="/docs/basic-ops.html">guarded call to equals()</a>. The expression on the left-hand side must have a method named equals that takes one parameter of type Any? and returns Boolean. Thus, all the Java objects have it out of the box. On the other hand, there’s an extension function to Any? that performs the same kind of lookup as toString().</p>

<h4 id="hashcode">hashCode()</h4>

<p>hashCode() works for Java objects.</p>

<p>In the upcoming Kotlin standard library there are plans to have a Hashable interface that is required for something to be put into a non-identity hash-map.</p>

<h4 id="waitnotify">wait()/notify()</h4>

<p><a href="http://java.sun.com/docs/books/effective">Effective Java Item 69</a> kindly suggests to Prefer concurrency utilities to wait and notify. Thus, these methods are not available on references of type Any, only on Java objects.</p>

<h4 id="getclass">getClass()</h4>

<p>To retrieve the type information from an object, one uses the javaClass extension property.</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">val</span> <span class="n">fooClass</span> <span class="p">=</span> <span class="n">foo</span><span class="p">.</span><span class="n">javaClass</span>
</code></pre></div>

<p>Instead of Java’s Foo.class use javaClass<foo>().</foo></p>

<div class="highlight"><pre><code class="kotlin"><span class="k">val</span> <span class="n">fooClass</span> <span class="p">=</span> <span class="n">javaClass</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()</span>
</code></pre></div>

<h4 id="finalize">finalize()</h4>

<p>finalize() can be overridden exactly like toString()</p>

<h4 id="clone">clone()</h4>

<p>clone() can be overridden like toString() but with specifying Cloneable as a supertype. Do not forget about <a href="http://java.sun.com/docs/books/effective">Effective Java Item 11</a>: Override clone judiciously.</p>

<h3 id="inheritance-from-java-classes">Inheritance from Java classes</h3>
<p>At most one Java-class (and as many Java interfaces as you like) can be a supertype for a class in Kotlin. This class must go first in the supertype list.</p>

<h3 id="accessing-static-members">Accessing static members</h3>

<p>Static members of Java classes form “class objects” for these classes. One cannot pass such a “class object” around as a value, but can access the members explicitly, for example</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">if</span> <span class="p">(</span><span class="n">Character</span><span class="p">.</span><span class="n">isLetter</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="calling-kotlin-code-from-java">Calling Kotlin code from Java</h2>

<p>Kotlin code can be called from Java easily.</p>

<h3 id="package-level-functions">Package-level functions</h3>

<p>All the functions and properties declared inside a package org.foo.bar are put into a Java class named org.foo.bar.BarPackage.</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">package</span> <span class="nn">demo</span>
  <span class="k">class</span> <span class="nf">Foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="k">fun</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><code class="kotlin"><span class="k">new</span> <span class="nf">Foo</span><span class="p">();</span>
<span class="n">demo</span><span class="p">.</span><span class="n">DemoPackage</span><span class="p">.</span><span class="n">bar</span><span class="p">();</span>
</code></pre></div>
<p>// Java</p>

<p>For the root package (the one that’s called a “default package” in Java), a class named _DefaultPackage is created.</p>

<h3 id="checked-exceptions-1">Checked Exceptions</h3>

<p>As we mentioned above, Kotlin does not have checked exceptions. So, normally, the Java signatures of Kotlin functions do not declare exceptions thrown. Thus if we have a function in Kotlin like this:</p>

<div class="highlight"><pre><code class="kotlin"><span class="k">package</span> <span class="nn">demo</span>

<span class="k">fun</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="nf">IOException</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<p>And we want to call it from Java and catch the exception:</p>

<div class="highlight"><pre><code class="kotlin"><span class="c1">// Java</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="n">demo</span><span class="p">.</span><span class="n">DemoPackage</span><span class="p">.</span><span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// error: foo() does not declare IOException in the throws list</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p>we get an error message from the Java compiler, because foo() does not declare IOException. Now, what should we do? There are a few options:</p>

<ul>
  <li>Option one (suggested in the comments below) is to create a pseudo-throwing function in Java:</li>
</ul>

<div class="highlight"><pre><code class="kotlin"><span class="c1">// Java</span>
<span class="p">&lt;</span><span class="n">E</span> <span class="n">extends</span> <span class="n">Throwable</span><span class="p">&gt;</span> <span class="k">void</span> <span class="n">mayThrow</span><span class="p">(</span><span class="n">Class</span><span class="p">&lt;</span><span class="n">E</span><span class="p">&gt;</span> <span class="n">eClass</span><span class="p">)</span> <span class="n">throws</span> <span class="n">E</span> <span class="p">{</span>
  <span class="c1">// Do nothing</span>
<span class="p">}</span>
</code></pre></div>

<p>And then write:</p>

<div class="highlight"><pre><code class="kotlin"><span class="c1">// Java</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="n">mayThrow</span><span class="p">(</span><span class="n">IOException</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
  <span class="n">demo</span><span class="p">.</span><span class="n">DemoPackage</span><span class="p">.</span><span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// No problem</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<ul>
  <li>Option two is to catch Throwable and do an <em>instanceof</em> check. This is not very elegant, but will work.</li>
  <li>Option three is to write a wrapper function in Java:</li>
</ul>

<div class="highlight"><pre><code class="kotlin"><span class="k">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="n">throws</span> <span class="n">IOException</span> <span class="p">{</span> <span class="c1">// Java does not require us to throw an exception if we declare one</span>
  <span class="n">demo</span><span class="p">.</span><span class="n">DemoPackage</span><span class="p">.</span><span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<p>Now, you can call foo() instead of demo.DemoPackage.foo(), and catch the exception.</p>

<ul>
  <li>Option four is to make Kotlin put a throws list to the foo()’s signature with the throws annotation:</li>
</ul>

<div class="highlight"><pre><code class="kotlin"><span class="n">throws</span><span class="p">&lt;</span><span class="n">IOException</span><span class="p">&gt;</span> <span class="k">fun</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="nf">IOException</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="null-safety-1">Null-safety</h3>
<p>When calling Kotlin functions from Java, nobody prevents us from passing a null as a non-null parameter. That’s why Kotlin generates runtime checks for all public functions that expect non-nulls. This way we get a NullPointerException in the Java code immediately.</p>

<h3 id="properties">Properties</h3>

<p>Property getters are turned into <em>get</em>-methods, and setters – into <em>set</em>-methods.</p>


    </div>

</div>

<footer class="global-footer">

    <div class="global-footer-externals">
        <div class="g-layout">
            <div class="g-8">
                <div class="header">Stay Tuned!</div>
                <ul class="externals-links-list">
                    <li class="list-item">
                        <a href="http://twitter.com/project_kotlin" class="link link_twitter">
                            <span class="icon icon_twitter"></span>
                            <span class="text">@project_kotlin</span>
                        </a>
                    </li>

                    <li class="list-item">
                        <a href="https://plus.google.com/communities/104597899765146112928" class="link link_gplus">
                            <span class="icon gray-icon icon_gplus"></span>
                            <span class="text">Google+</span>
                        </a>
                    </li>

                    <li class="list-item">
                        <a href="http://blog.jetbrains.com/kotlin/" class="link link_blog">
                            <span class="icon gray-icon icon_blog"></span>
                            <span class="text">Blog</span>
                        </a>
                    </li>

                    <li class="list-item">
                        <a href="http://youtrack.jetbrains.com/issues/KT" class="link link_issue-tracker">
                            <span class="icon gray-icon icon_youtrack"></span>
                            <span class="text">Issue Tracker</span>
                        </a>
                    </li>

                    <li class="list-item">
                        <a href="http://devnet.jetbrains.net/community/kotlin" class="link link_forum">
                            <span class="icon gray-icon icon_forum"></span>
                            <span class="text">Forum</span>
                        </a>
                    </li>
                </ul>
            </div>

        </div>
    </div>

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000-2013 JetBrains. All rights reserved
                <br>
                <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>
            </div>

            <div class="terms-sponsor">
                Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains">JetBrains</a>
            </div>
        </div>
    </div>

</footer>
<!--
Include all scripts required here
-->

<script type="text/javascript" src="/scripts/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="/scripts/jquery.toc.min.js"></script>

</body>
</html>